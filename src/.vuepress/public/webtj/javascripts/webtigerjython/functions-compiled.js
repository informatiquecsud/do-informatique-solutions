var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}};e.prototype.createResolveAndReject_=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(l){this.reject_(l);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(m){c.reject(m)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(r){g(r)}}:b}var d,g,f=new e(function(a,b){d=a;g=b});this.callWhenSettled_(c(a,d),c(b,g));return f};
e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};e.resolve=c;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,d){for(var l=$jscomp.makeIterator(a),e=l.next();!e.done;e=l.next())c(e.value).callWhenSettled_(b,
d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,l){function e(b){return function(c){g[b]=c;m--;0==m&&a(g)}}var g=[],m=0;do g.push(void 0),m++,c(d.value).callWhenSettled_(e(g.length-1),l),d=b.next();while(!d.done)})};return e},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(d,e){function f(a){a.done?d(a.value):Promise.resolve(a.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(n){return!1}}function c(){}function d(a){if(!$jscomp.owns(a,f)){var b=new c;$jscomp.defineProperty(a,f,{value:b})}}function e(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof c)return a;d(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&
$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var h=0,k=function(a){this.id_=(h+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};k.prototype.set=function(a,b){d(a);if(!$jscomp.owns(a,f))throw Error("WeakMap key fail: "+a);a[f][this.id_]=b;return this};k.prototype.get=function(a){return $jscomp.owns(a,f)?a[f][this.id_]:void 0};k.prototype.has=
function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};k.prototype.delete=function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var c=new WeakMap,d=function(a){this.data_={};this.head_=h();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};d.prototype.set=function(a,b){a=0===a?0:a;var c=e(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};d.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};d.prototype.has=function(a){return!!e(this,a).entry};
d.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};d.prototype.entries=function(){return f(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return f(this,function(a){return a.key})};d.prototype.values=function(){return f(this,function(a){return a.value})};d.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(a,b){var d=b&&typeof b;"object"==
d||"function"==d?c.has(b)?d=c.get(b):(d=""+ ++k,c.set(b,d)):d="p_"+b;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var f=e[a];if(b!==b&&f.key!==f.key||b===f.key)return{id:d,list:e,index:a,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},f=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=
a.next=a.head=a},k=0;return d},"es6","es3");
$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([b]));if(!c.has(b)||1!=c.size||c.add(b)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var f=c.entries(),h=f.next();if(h.done||h.value[0]!=b||h.value[1]!=b)return!1;h=f.next();return h.done||h.value[0]==b||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:f.next().done}catch(k){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var c=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};c.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};c.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};c.prototype.clear=function(){this.map_.clear();
this.size=0};c.prototype.has=function(a){return this.map_.has(a)};c.prototype.entries=function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(a,b){var c=this;this.map_.forEach(function(d){return a.call(b,d,d,c)})};return c},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6","es3");
function showErrors(a){function b(a,b,c){return c.indexOf(a)===b}removeEditorMarkers();removeErrorBoxes();for(var c=[],d=0;d<a.length;d++)0<d?a[d-1].line!=a[d].line&&showErrorBox(a[d].line,a[d].offset,a[d].msg):showErrorBox(a[d].line,a[d].offset,a[d].msg),c.push(a[d].line);1<c.length?c.filter(b).forEach(function(a){addEditorMarker(a)}):addEditorMarker(c)}function removeEditorMarkers(){0<markerIds.length&&(markerIds.forEach(function(a){editor.session.removeMarker(a)}),markerIds=[])}
function addEditorMarkers(a){function b(a,b,e){return e.indexOf(a)===b}removeEditorMarkers();1<a.length?a.filter(b).forEach(function(a){addEditorMarker(a)}):addEditorMarker(a)}function sleep(a){return new Promise(function(b){return setTimeout(b,a)})}
function addEditorMarker(a){var b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return b=ace.require("ace/range").Range,c=+a+1,editor.scrollToLine(c,!0,!0,function(){}),editor.gotoLine(c,0,!0),d=150,f.yield(sleep(200),2);e=editor.session.addMarker(new b(a,0,a,d),"errorMarker","fullLine");markerIds.push(e);f.jumpToEnd()})}function removeErrorBoxes(){0<errorBoxes.length&&(errorBoxes.forEach(function(a){removeErrorBox(a)}),errorBoxes=[])}
function removeErrorBox(a){null!=a&&a.parentElement.removeChild(a)}
function showErrorBox(a,b,c){var d,e,f,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return d=+a+1,editor.scrollToLine(d,!0,!0,function(){}),editor.gotoLine(d,0,!0),m.yield(sleep(200),2);e=editor.getSession().getDocument().createAnchor(a,b);f=editor.renderer.textToScreenCoordinates(e.getPosition());h=editor.renderer.lineHeight;k=document.createElement("div");k.id="errorBox";k.innerHTML=c;l=document.getElementById("editor");k.style.left="44px";10<d&&d>=editor.session.getLength()?
k.style.top=f.pageY-l.getBoundingClientRect().top-h-2+"px":k.style.top=f.pageY-l.getBoundingClientRect().top+h+2+"px";errorBoxes.push(k);l.appendChild(k);editor.focus();m.jumpToEnd()})}
function checkSyntax(){var a=document.getElementById("output"),b=tPyParser.findAllErrors(editor.getValue()),c=checkMakeTurtleCommand(editor.getValue()),d=checkMultipleMakeTurtleCommands(editor.getValue()),e="",f=[];if(!c||d||0<b.length)return c?d?(e=currentDict["multiple-maketurtle-error"],f.push({line:0,offset:0,msg:e})):0<b.length&&(e=currentDict.line+(b[0].line+1)+"] "+b[0].msg+"\n",f.push({line:b[0].line,offset:b[0].offset,msg:b[0].msg}),console.log(e),e=e.replace("\n","<br>")):(e=currentDict["maketurtle-error"],
f.push({line:0,offset:0,msg:e})),showErrors(f),a.className="color-red",a.innerHTML=e,!1;removeEditorMarkers();removeErrorBox();a.innerHTML=currentDict["correct-syntax"];return!0}function outf(a){var b=document.getElementById("output");b.innerHTML+=a}function builtinRead(a){if(void 0===Sk.builtinFiles||void 0===Sk.builtinFiles.files[a])throw currentDict["file-not-found"]+a+"'";return Sk.builtinFiles.files[a]}
function run(a){var b=document.getElementById("output");b.innerHTML="";b.className="color-black";Sk.pre="output";Sk.configure({inputfunTakesPrompt:!0,output:outf,read:builtinRead});Sk.TurtleGraphics={target:a,width:$("#"+a).width(),height:$("#"+a).height()};Sk.misceval.asyncToPromise(function(){var a=editor.getValue();if(""===a)return!0;a=replaceRepeatStatements(a);a=findAndReplaceNonAsciiChars(a);a=removeParenthesisFromListFunctions(a);return Sk.importMainWithBody("<stdin>",!1,a,!0)}).then(function(){isRunning=
!1},function(a){b.className="color-red";if(-1!==a.toString().indexOf("STOP"))b.innerHTML=b.innerHTML+"\n"+currentDict["abort-message"];else{a=a.toString();var c=a.indexOf("on line ")+8;c=a.substring(c,a.length);a=a.substr(0,a.indexOf("on line "));--c;showErrorBox(c,0,a);addEditorMarkers(c);b.innerHTML=currentDict.line+(c+1)+"] "+a;document.getElementById("modal").style.display="none";document.getElementById("mycanvas-modal").innerHTML="";editor.focus()}isRunning=!1})}
window.onload=function(){var a=document.getElementById("output"),b=a.scrollTop;setInterval(function(){if(isRunning||b==a.scrollTop)a.scrollTop=a.scrollHeight-a.clientHeight,b=a.scrollTop},500)};var repeatLength=6;function replaceRepeatStatements(a){var b=extractRepeatsAndColons(a);return 0<b.colons.length?(b=pairRepeatsAndColons(b.repeats,b.colons),replaceAllRepeatStatementsWithForLoops(b,a)):a}
function extractNumber(a,b,c){a=c.substring(a+repeatLength,b);b=[].concat($jscomp.arrayFromIterable(new Set([].concat($jscomp.arrayFromIterable(a))))).join("");return 0===a.length||" "===b?-1:a}
function replaceAllRepeatStatementsWithForLoops(a,b){for(var c=0;c<a.length;c++){var d=a[c];a[c].number=extractNumber(d.repeat,d.colon,b)}c=[];d=a.length-1;for(var e=a[d],f=b.length-1;0<=f;)if(e.colon===f){f-=e.colon-e.repeat+1;if(-1===e.number)c.unshift("while (True):");else{var h="for __i_897523059123 in xrange(int(";h+=e.number;h+=")):";c.unshift(h)}0<d&&(d--,e=a[d])}else c.unshift(b.charAt(f)),f--;return c.join("")}
function pairRepeatsAndColons(a,b){for(var c=[],d=0;d<a.length;d++)c.push({repeat:a[d],colon:b[d],number:-1});return c}function bracketCheck(a,b){if(b){if("("===a||"{"===a||"["===a)return 1;if(")"===a||"}"===a||"]"===a)return-1}return 0}function doubleQuotCheck(a,b,c){return quotCheck(a,b,'"',c)}function singleQuotCheck(a,b,c){return quotCheck(a,b,"'",c)}function quotCheck(a,b,c,d){return"\\"===b?0:a===c&&0===d%2?1:0}function checkQuots(a,b){return 0===a%2&&0===b%2}
function checkBrackets(a){return 0===a}function checkBracketsAndQuots(a,b,c){return 0===a&&0===b%2&&0===c%2}function checkNonKeyWordRepeat(a,b){for(var c=0;" "===b.charAt(a+1+c)||"\n"===b.charAt(a+1+c)||"\t"===b.charAt(a+1+c);)c+=1;c+=1;"repeat"===b.substring(a+c,a+c+repeatLength)&&(c+=repeatLength);return c}function checkSingleLineComment(a,b){b=b.substr(0,a);var c=b.lastIndexOf("#");return-1!==c&&-1===b.substr(c,a).indexOf("\n")?!0:!1}
function extractRepeatsAndColons(a){for(var b=[],c=[],d=0,e=0,f=0,h=!1,k,l=[!1,!1,""],m=!1,g=0;g<a.length-repeatLength;){var n=a.charAt(g);k=a.charAt(g+1);var p=a.charAt(g+2),q=a.charAt(g-1);l=multiLineStringCheck(n,k,p,l);l[1]||checkSingleLineComment(g,a)?l[0]?(g+=3,m=!0):g+=1:m?(g+=1,m=!1):(e+=singleQuotCheck(n,q,f),f+=doubleQuotCheck(n,q,e),k=checkQuots(e,f),d+=bracketCheck(n,k),k=checkBracketsAndQuots(d,e,f),"."===n?g+=checkNonKeyWordRepeat(g,a):"r"===n?"repeat"===a.substring(g,g+repeatLength)&&
k?(b.push(g),h=!0,g+=repeatLength):g+=1:":"===n&&h&&k?(c.push(g),g+=1,h=!1):g+=1)}assert(b.length===c.length,"Amount of found repeats and colons is not equal! repeats: "+b.length+", colons: "+c.length);return{repeats:b,colons:c}}function multiLineStringCheck(a,b,c,d){return'"'===a&&'"'===b&&'"'===c&&"'"!=d[2]?d[1]?[!0,!1,""]:[!0,!0,'"']:"'"===a&&"'"===b&&"'"===c&&'"'!=d[2]?d[1]?[!0,!1,""]:[!0,!0,"'"]:[!1,d[1],d[2]]}
function findAndReplaceNonAsciiChars(a){for(var b=[],c=0,d=0,e=!1,f=!1,h=[!1,!1,""],k=!1,l=a.length-1;0<=l;){var m=a.charAt(l),g=a.charAt(l-1),n=a.charAt(l-2);h=multiLineStringCheck(m,g,n,h);h[0]?(b.unshift(m),b.unshift(g),b.unshift(n),l-=3,h[1]||(e=k=!0,0>l&&f&&b.unshift("u"))):(h[1]||(c+=singleQuotCheck(m,g,d),d+=doubleQuotCheck(m,g,c)),h[1]||1===c%2||1===d%2?(e=!0,b.unshift(m),/[^\x00-\x7F]/.test(m)&&(f=!0)):0===c%2&&0===d%2?(k||b.unshift(m),e&&(e=!1,f&&(!k&&"u"!=g||k&&"u"!=m)&&(b.unshift("u"),
f=!1),k&&(k=!1,b.unshift(m)))):b.unshift(m),--l)}return b.join("")}function removeParenthesisFromListFunctions(a){for(var b=[],c=0;c<a.length;)".last"===a.substr(c,5)?(b.push(".last()"),c+=5):".first"===a.substr(c,6)?(b.push(".first()"),c+=6):(b.push(a.charAt(c)),c+=1);return b.join("")}function checkMakeTurtleCommand(a){var b=a.indexOf("from gturtle import *");return-1===b||(a=a.indexOf("makeTurtle()"),-1!==a&&a>b)?!0:!1}
function checkMultipleMakeTurtleCommands(a){var b=a.indexOf("from gturtle import *");if(-1!==b){var c=a.indexOf("makeTurtle()");if(-1!==c&&c>b&&a.lastIndexOf("makeTurtle()")!==c)return!0}return!1}function assert(a,b){if(!a){b=b||currentDict["assertion-failed"];if("undefined"!==typeof Error)throw Error(b);throw b;}};
