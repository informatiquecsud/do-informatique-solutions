if(null!=navigator.userAgent.match(/iPad/i)||null!=navigator.userAgent.match(/iPhone/i)){var fsButton=document.getElementById("fullscreen-button");fsButton.style.display="none"}function translateStrings(a){$("[data-translate]").each(function(){$(this).is("li")||$(this).is("a")?$(this).attr("title",a[$(this).data("translate")]):$(this).text(a[$(this).data("translate")])})}
function setDict(a){"de"===a?(language="de",currentDict=dictionary.de,document.getElementById("language-image").src="img/langDE.png"):"fr"===a?(language="fr",currentDict=dictionary.fr,document.getElementById("language-image").src="img/langFR.png"):"it"===a?(language="it",currentDict=dictionary.it,document.getElementById("language-image").src="img/langIT.png"):"en"===a?(language="en",currentDict=dictionary.en,document.getElementById("language-image").src="img/langEN.png"):"ru"===a?(language="ru",currentDict=
dictionary.ru,document.getElementById("language-image").src="img/langRU.png"):currentDict=dictionary.de;tPyParser.setLanguage(language)}var tPyParser=tigerjython.tpyparser.TPyParser();tPyParser.repeatStatement=!0;var region=navigator.language.toLowerCase(),language="de",currentDict=dictionary.de;-1!==region.indexOf("de")?setDict("de"):-1!==region.indexOf("fr")?setDict("fr"):-1!==region.indexOf("it")?setDict("it"):-1!==region.indexOf("en")?setDict("en"):-1!==region.indexOf("ru")&&setDict("ru");translateStrings(currentDict);
function setDE(){setDict("de");translateStrings(currentDict)}function setFR(){setDict("fr");translateStrings(currentDict)}function setIT(){setDict("it");translateStrings(currentDict)}function setEN(){setDict("en");translateStrings(currentDict)}function setRU(){setDict("ru");translateStrings(currentDict)}var changedLanguage=!1;
function openLanguageSwitcher(){changedLanguage?(document.getElementById("language-switch").style.display="none",changedLanguage=!1):(document.getElementById("language-switch").style.display="block",changedLanguage=!0)}Split(["#editor","#right-content"],{sizes:[40,60],minSize:300});var vh=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",vh+"px");window.addEventListener("resize",function(){document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px")});
var markerIds=[],errorBoxes=[],editor=ace.edit("editor");editor.setTheme("ace/theme/crimson_editor");editor.setOptions({fontSize:"14pt",newLineMode:"windows",mode:"ace/mode/python"});editor.addEventListener("click",function(){removeErrorBoxes();removeEditorMarkers()});
editor.textInput.getElement().addEventListener("keydown",function(a){removeErrorBoxes();removeEditorMarkers();(a.ctrlKey||a.metaKey)&&13===a.which?(a.preventDefault(),runProgram()):(a.ctrlKey||a.metaKey)&&83===a.which?(a.preventDefault(),document.getElementById("save-button").click()):(a.ctrlKey||a.metaKey)&&79===a.which&&(a.preventDefault(),document.getElementById("load-button").click())},!0);editor.session.on("changeScrollTop",function(){removeErrorBoxes();removeEditorMarkers()});
editor.session.on("change",function(){var a=editor.session.getValue();sessionStorage.setItem("WebTJ-program",a)});var lastProgram=sessionStorage.getItem("WebTJ-program");null!==lastProgram&&editor.session.setValue(lastProgram);editor.focus();
if(window.File&&window.FileReader&&window.FileList)var dropHandler=function(a){a.preventDefault();if("file"===a.dataTransfer.items[0].kind){var b=a.dataTransfer.items[0].getAsFile();if(".py"===b.name.substr(b.name.length-3,3)){var c=new FileReader;c.onload=function(a){return function(a){a=a.target.result;removeErrorBoxes();removeEditorMarkers();editor.setValue(a)}}(b);c.readAsText(b)}}a.dataTransfer.items.clear()},dragOverHandler=function(a){a.preventDefault()};var abortFlag=!1,isRunning=!1;
function toggleFullScreen(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),document.getElementById("fullscreen-image").src=
"img/minimize.png",document.getElementById("fullscreen-text").innerText=currentDict["options-close-fullscreen"]):(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.getElementById("fullscreen-image").src="img/expand.png",document.getElementById("fullscreen-text").innerText=currentDict["options-fullscreen"]);editor.focus()}
if(window.File&&window.FileReader&&window.FileList){document.getElementById("save-button").addEventListener("click",function(){var a=prompt(currentDict["choose-program-name"]);if(null!==a){""===a?(a=new Date,a=currentDict["program-save-prefix"]+a.getFullYear()+"_"+(a.getMonth()+1)+"_"+a.getDate()+".py"):".py"!=a.substr(a.length-3)&&(a+=".py");var b=new Blob([editor.getValue()],{type:"text/plain;charset=utf-8"});saveAs(b,a)}});var inputFile=document.createElement("INPUT");document.getElementById("load-button").addEventListener("click",
function(){inputFile.value=null;inputFile.setAttribute("type","file");inputFile.setAttribute("accept",".py");inputFile.click()},!1);inputFile.addEventListener("change",function(a){a=inputFile.files[0];var b=new FileReader;b.onload=function(a){return function(a){editor.setValue(a.target.result)}}(a);b.readAsText(a)})}else alert(currentDict["file-api-error"]);var urlParams=new URLSearchParams(window.location.search),searchParam=urlParams.get("prog");
null===searchParam||-1===searchParam.indexOf("pythononline.ch")&&-1===searchParam.indexOf("tjgroup.ch")&&-1===searchParam.indexOf("brickgate.ch")||$.ajax({url:searchParam,type:"GET",success:function(a){editor.setValue(a.toString());editor.getSession().getSelection().clearSelection()},error:function(a){console.log("An error occurred during the GET request to: "+searchParam)}});
function openInformation(){var a=document.getElementById("modal"),b=document.getElementById("mycanvas-modal"),c=document.createElement("div");c.setAttribute("class","scroll-wrapper");var d=document.createElement("iframe");d.src="html/info.html";c.appendChild(d);b.appendChild(c);d=document.getElementsByClassName("close")[0];isRunning||"none"!=a.style.display&&""!=a.style.display||(a.style.display="block",d.onclick=function(){a.style.display="none";b.removeChild(c);editor.focus()},window.onclick=function(d){d.target==
a&&(a.style.display="none",b.removeChild(c),editor.focus())})}function clearCanvas(){document.getElementById("mycanvas").innerHTML=""}function runProgram(){removeErrorBoxes();removeEditorMarkers();abortFlag=!1;!isRunning&&checkSyntax()&&(isRunning=!0,clearCanvas(),run("mycanvas"));editor.focus()}
function runModalProgram(){removeErrorBoxes();removeEditorMarkers();abortFlag=!1;var a=document.getElementById("modal"),b=document.getElementsByClassName("close")[0];!isRunning&&checkSyntax()&&(isRunning=!0,clearCanvas(),a.style.display="block",b.onclick=function(){a.style.display="none";stopProgram();document.getElementById("mycanvas-modal").innerHTML="";editor.focus()},window.onclick=function(b){b.target==a&&(a.style.display="none",stopProgram(),document.getElementById("mycanvas-modal").innerHTML=
"",editor.focus())},run("mycanvas-modal"))}function stopProgram(){abortFlag=!0;isRunning=!1};
